<!DOCTYPE html>
<html>
  <head lang="en">
    <meta charset="UTF-8">
    <title>Simplechart-React widget</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/nvd3/1.8.1/nv.d3.min.css"/>
    <link rel="stylesheet" href="http://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <style>
        header > h1 {
            text-align: center;
            font-family: sans-serif;
        }
    </style>
  </head>
  <body>
    <header>
        <h1>Simplechart-React widget</h1>
    </header>

    <h2>Widget 1</h2>
    <figure
      id='widget1'
      class='simplechart-widget'
      data-url='/mock-api/sampleData1.json'
    >
      <p class='simplechart-title'></p>
      <p class='simplechart-caption'></p>
      <div class='simplechart-chart'></div>
      <p class='simplechart-credit'></p>
    </figure>

    <h2>Widget 2</h2>
    <figure
      id='widget2'
      class='simplechart-widget'
      data-url='/mock-api/sampleData2.json'
    >
      <p class='simplechart-title'></p>
      <p class='simplechart-caption'></p>
      <div class='simplechart-chart'></div>
      <p class='simplechart-credit'></p>
    </figure>

    <h2>Widget 3</h2>
    <button id="tiggerUpdate">Update chart</button>
    <figure
      id='widget3'
      class='simplechart-widget'
      data-var='widget3'
    >
      <p class='simplechart-title'></p>
      <p class='simplechart-caption'></p>
      <div class='simplechart-chart'></div>
      <p class='simplechart-credit'></p>
    </figure>

    <script>
      var _SimplechartWidgetData = _SimplechartWidgetData || {};
      _SimplechartWidgetData['widget3'] = {
        data: [
          {
            label: "One",
            value: 29.7
          },
          {
            label: "Two",
            value: 0
          },
          {
            label: "Three",
            value: 32.8
          },
          {
            label: "Four",
            value: 196.4
          },
          {
            label: "Five",
            value: 0.1
          },
          {
            label: "Six",
            value: 98.0
          },
          {
            label: "Seven",
            value: 13.9
          },
          {
            label: "Eight",
            value: 5.1
          }
        ],
        options: {
          type: "pieChart",
          height: 250,
          donut: false,
        },
        metadata: {
          title: "Example local data update",
          caption: "Should switch from regular pieChart to donut when button is clicked",
          credit: "Source: Alley Interactive"
        }
      }
    </script>
    <script src="/static/widget.js"></script>
    <script>
      document.getElementById('tiggerUpdate').addEventListener('click', function(evt) {
        var widgetUpdate = new CustomEvent('widgetData', {
          detail: {
            options: {
              donut: true
            }
          }
        });
        document.getElementById('widget3').dispatchEvent(widgetUpdate);
      });
    </script>
  </body>
</html>
